(this["webpackJsonprancid-tomatillos"]=this["webpackJsonprancid-tomatillos"]||[]).push([[0],{25:function(e,t,s){},26:function(e,t,s){},36:function(e,t,s){},37:function(e,t,s){},38:function(e,t,s){},39:function(e,t,s){},40:function(e,t,s){},41:function(e,t,s){"use strict";s.r(t);var a=s(1),n=s.n(a),i=s(18),r=s.n(i),c=s(19),o=s(8),l=s(9),d=s(11),h=s(10),j=(s(25),s.p+"static/media/search.937108d0.svg"),m=s.p+"static/media/cancel.e010628a.svg",u=(s(26),s(7)),v=s(0),b=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(o.a)(this,s),(a=t.call(this,e)).handleChange=function(e){a.setState({searchWords:e.target.value})},a.filterSearch=function(e){var t=a.state.searchWords.toLowerCase(),s=a.props.movies.filter((function(e){return e.title.toLowerCase().includes(t)}));s.length?(a.props.stateChange("error",""),a.props.stateChange("filteredMovies",s)):(a.props.stateChange("error","No movies found"),a.props.stateChange("filteredMovies",[]))},a.clearInputs=function(e){e.preventDefault(e),a.handleChange(e),a.setState({searchWords:""}),a.props.stateChange("filteredMovies",[])},a.state={searchWords:""},a}return Object(l.a)(s,[{key:"render",value:function(){var e=this;return Object(v.jsx)("form",{children:Object(v.jsxs)(u.b,{to:"/",style:{textDecoration:"none"},children:[Object(v.jsx)("img",{className:"search-icon",src:j,alt:"search icon"}),Object(v.jsx)("input",{type:"text",placeholder:"Search by title",name:"search",value:this.state.searchWords,onChange:this.handleChange,onKeyUp:function(t){return e.filterSearch(t)}}),Object(v.jsx)("button",{className:"clear-button",onClick:function(t){return e.clearInputs(t)},children:Object(v.jsx)("img",{className:"clear-icon",src:m,alt:"clear button"})})]})})}}]),s}(a.Component),p=s.p+"static/media/logo.84ef81a9.svg",f=(s(36),function(e){var t=e.movies,s=e.stateChange,a=e.singleMovieID;return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("header",{children:Object(v.jsxs)("section",{className:"header-container",children:[Object(v.jsx)(u.b,{to:"/",className:"logo-container",children:Object(v.jsx)("img",{className:"logo",src:p,alt:"rancid tomatillos logo"})}),Object(v.jsx)("div",{className:"form-container",children:Object(v.jsx)(b,{stateChange:s,movies:t,singleMovieID:a})})]})})})}),O=(s(37),"https://rancid-tomatillos.herokuapp.com/api/v2"),g=function(e){return fetch("".concat(O,"/movies/").concat(e,"/videos")).then((function(e){return e.json()}))},x=function(e){var t=Math.floor(e/60),s=e%60;return"".concat(t,"h ").concat(s,"m")},N=function(e){if(e)return e[0]},w=function(e){if(e.length)return e[0].key},C=function(e){return 10*e.toFixed(1)},_=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;return Object(o.a)(this,s),(e=t.call(this)).state={movieInfo:{},error:"",isLoading:!0},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e,t=this;this.props.stateChange("singleMovieID",this.props.id),Promise.all([(e=this.props.id,fetch("".concat(O,"/movies/").concat(e)).then((function(e){return e.json()}))),g(this.props.id)]).then((function(e){t.setState({movieInfo:t.buildMovieObject(e)}),t.setState({isLoading:!1})})).catch((function(e){return t.setState({error:"There was an error loading this movie."})}))}},{key:"buildMovieObject",value:function(e){var t;return{backdrop:e[0].movie.backdrop_path,title:e[0].movie.title,overview:e[0].movie.overview,rating:C(e[0].movie.average_rating),genre:N(e[0].movie.genres),release_date:(t=e[0].movie.release_date,new Date(t).getFullYear()),runtime:x(e[0].movie.runtime),videoKey:w(e[1].videos)}}},{key:"render",value:function(){return Object(v.jsxs)(v.Fragment,{children:[this.state.isLoading&&Object(v.jsxs)("div",{className:"load-container",children:[Object(v.jsx)("h2",{children:" Page loading... "}),Object(v.jsx)("div",{className:"spinner-box",children:Object(v.jsx)("div",{className:"circle-border",children:Object(v.jsx)("div",{className:"circle-core"})})})]}),this.state.error&&Object(v.jsxs)("p",{"data-cy":"error",className:"error",children:[" ",this.state.error," "]}),Object(v.jsxs)("div",{className:"flex-container",children:[Object(v.jsxs)("section",{className:"movie-details-section",children:[Object(v.jsxs)("div",{className:"backdrop-container",children:[Object(v.jsx)("img",{className:"backdrop",alt:"movie backdrop",src:this.state.movieInfo.backdrop}),Object(v.jsx)("div",{className:"overlay",children:" "})]}),Object(v.jsxs)("section",{className:"movie-words-container",children:[Object(v.jsx)("h1",{className:"movie-words__title",children:this.state.movieInfo.title}),Object(v.jsxs)("h2",{className:"movie-words__details",children:[Object(v.jsx)("img",{className:"tomatillo",src:this.props.icon,alt:"tomatillo icon"}),this.state.movieInfo.rating,"% \xb7 ",this.state.movieInfo.genre," \xb7 ",this.state.movieInfo.release_date," \xb7 ",this.state.movieInfo.runtime]}),Object(v.jsx)("p",{className:"overview",children:this.state.movieInfo.overview})]})]}),Object(v.jsx)("div",{className:"video-container",children:Object(v.jsx)("aside",{className:"iframe-container",children:Object(v.jsx)("iframe",{loading:"lazy",src:"https://www.youtube.com/embed/".concat(this.state.movieInfo.videoKey),allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Embedded youtube"})})})]})]})}}]),s}(a.Component),M=s.p+"static/media/tomatillo.98866497.svg",y=(s(38),function(e){var t=e.id,s=e.title,a=e.poster,n=e.rating,i=e.icon;return Object(v.jsxs)(u.b,{to:"/".concat(t),className:"movie-card",children:[Object(v.jsx)("img",{src:a,alt:s,className:"poster"}),Object(v.jsxs)("aside",{className:"card-info",children:[Object(v.jsxs)("div",{className:"rating-box",children:[Object(v.jsx)("img",{src:i,alt:"tomatillo icon"}),Object(v.jsxs)("p",{children:[n,"%"]})]}),Object(v.jsx)("p",{className:"hover-title",children:s})]})]})}),k=(s(39),s(40),s.p+"static/media/filter.da656d85.svg"),I=s.p+"static/media/dropdown.1561b10f.svg",D=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(o.a)(this,s),(a=t.call(this,e)).showMenuHandler=function(e){e.preventDefault(),!1===a.state.showMenu?a.setState({showMenu:!0}):a.setState({showMenu:!1})},a.dropdownFilterSearch=function(e){e.preventDefault(),a.props.stateChange("filteredMovies",[]);var t=a.props.movies.filter((function(t){var s=parseInt(e.target.id),n=parseInt(t.rating);return 0===s&&n<=29||n>=s&&n<=s+9?t:1===s?a.props.movies:void 0}));a.errorHandling(t),a.setState({showMenu:!1})},a.errorHandling=function(e){e.length?(a.props.stateChange("error",""),a.props.stateChange("filteredMovies",e)):a.props.stateChange("error","No movies found")},a.state={showMenu:!1},a}return Object(l.a)(s,[{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{className:"menu-container",children:[Object(v.jsxs)("button",{className:"drop-down",id:"dropDown","aria-label":"Open drop down menu",onClick:function(t){return e.showMenuHandler(t)},children:[Object(v.jsx)("img",{className:"filter-icon",src:k,alt:"filter icon"}),Object(v.jsx)("img",{className:"down-icon",src:I,alt:"drop down icon"})]}),this.state.showMenu?Object(v.jsxs)("div",{className:"drop-down__menu",onClick:function(t){return e.dropdownFilterSearch(t)},children:[Object(v.jsx)("button",{id:"0",className:"drop-down__choice",children:" 0 - 29% "}),Object(v.jsx)("button",{id:"30",className:"drop-down__choice",children:" 30 - 39% "}),Object(v.jsx)("button",{id:"40",className:"drop-down__choice",children:" 40 - 49% "}),Object(v.jsx)("button",{id:"50",className:"drop-down__choice",children:" 50 - 59% "}),Object(v.jsx)("button",{id:"60",className:"drop-down__choice",children:" 60 - 69% "}),Object(v.jsx)("button",{id:"70",className:"drop-down__choice",children:" 70 - 79% "}),Object(v.jsx)("button",{id:"80",className:"drop-down__choice",children:" 80 - 89% "}),Object(v.jsx)("button",{id:"90",className:"drop-down__choice",children:" 90 - 100% "}),Object(v.jsx)("button",{id:"1",className:"drop-down__choice",children:" Clear Filter "})]}):null]})}}]),s}(a.Component),S=function(e){var t=e.movies,s=e.filteredMovies,a=e.icon,n=e.stateChange,i=e.error,r=s.length?s:t;!s.length&&i&&(r=[]);var c=r.map((function(e){return Object(v.jsx)(y,{id:e.id,title:e.title,poster:e.poster,rating:e.rating,icon:a},e.id)}));return Object(v.jsxs)("section",{className:"main-list",children:[Object(v.jsxs)("section",{className:"main-list__header",children:[Object(v.jsx)("h1",{className:"main-list__title",children:"Browse Rated Movies"}),Object(v.jsx)(D,{stateChange:n,movies:t})]}),Object(v.jsx)("section",{className:"movieGrid",children:c})]})},F=s(2),L=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;return Object(o.a)(this,s),(e=t.call(this)).stateChange=function(t,s){e.setState(Object(c.a)({},t,s))},e.state={movieData:[],filteredMovies:[],singleMovieID:"",isLoading:!0,error:""},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(O,"/movies")).then((function(e){return e.json()})).then((function(t){e.setState({movieData:e.prepMovieData(t.movies)}),e.stateChange("isLoading",!1)})).catch((function(t){return e.setState({error:"There was a loading error. Please reload the page and try again."})}))}},{key:"prepMovieData",value:function(e){return e.map((function(e){return{id:e.id,title:e.title,poster:e.poster_path,rating:C(e.average_rating)}}))}},{key:"render",value:function(){var e=this;return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("main",{className:"App",children:[Object(v.jsx)(f,{stateChange:this.stateChange,movies:this.state.movieData,filteredMovies:this.filteredMovies,singleMovieID:this.state.singleMovieID}),this.state.isLoading&&Object(v.jsxs)("div",{className:"load-container",children:[Object(v.jsx)("h2",{children:" Page loading... "}),Object(v.jsx)("div",{className:"spinner-box",children:Object(v.jsx)("div",{className:"circle-border",children:Object(v.jsx)("div",{className:"circle-core"})})})]}),this.state.error&&Object(v.jsxs)("p",{className:"error",children:[" ",this.state.error," "]}),Object(v.jsxs)(F.c,{children:[Object(v.jsx)(F.a,{exact:!0,path:"/",render:function(){return Object(v.jsx)(S,{movies:e.state.movieData,filteredMovies:e.state.filteredMovies,icon:M,stateChange:e.stateChange,error:e.state.error})}}),Object(v.jsx)(F.a,{exact:!0,path:"/:id",render:function(t){var s=t.match;return Object(v.jsx)(_,{icon:M,id:s.params.id,stateChange:e.stateChange})}})]})]})})}}]),s}(a.Component),W=Object(v.jsxs)(u.a,{children:[" ",Object(v.jsx)(L,{})," "]});r.a.render(Object(v.jsx)(n.a.StrictMode,{children:W}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.59c5a86c.chunk.js.map